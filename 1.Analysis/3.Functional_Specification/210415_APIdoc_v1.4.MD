# API Document

문서 이력

| 버전 | 일자       | 이력사항                                                     | 작성자 |
| ---- | ---------- | ------------------------------------------------------------ | ------ |
| v0.1 | 2021-04-14 | 문서 포맷 작성                                               | 최인규 |
| v1.0 | 2021-04-15 | 메인화면, 회원가입, 로그인, 로그아웃, 타이머 설정 및 실행 내용 작성 | 최인규 |
| v1.1 | 2021-04-15 | 공지사항 공지 조회, 작성, 수정, 삭제                         | 김예원 |
| v1.2 | 2021-04-15 | ID 찾기, PW 찾기, 인사말                                     | 최윤지 |
| v1.3 | 2021-04-15 | 얼굴등록, 상태확인                                           | 이장원 |
| v1.4 | 2021-04-15 | 게시판 게시물 조회, 작성, 수정, 삭제                         | 김지은 |

## 메인화면

| ACTION | METHOD | URL       | DESCRIPTION | 기능 |
| ------ | ------ | --------- | ----------- | ---- |
| main   | GET    | /main.bum | 메인화면    | -    |

> 참고사항



## 회원가입

| ACTION | METHOD | URL         | DESCRIPTION            | 기능   |
| ------ | ------ | ----------- | ---------------------- | ------ |
| signup | POST   | /signup.xxx | 버미 접속자의 회원가입 | INSERT |

+ 변수

| 변수명      | 데이터 형식 | 설명                           |
| ----------- | ----------- | ------------------------------ |
| user_id     | String      | 사용자 아이디 [중복 불가]      |
| user_pw     | String      | 사용자 비밀번호                |
| user_pwc    | String      | 사용자 비밀번호 확인           |
| user_name   | String      | 사용자 이름                    |
| user_phone  | int         | 사용자 휴대폰 번호             |
| user_email  | String      | 사용자 이메일 주소             |
| user_belong | String      | 사용자 소속 기관               |
| user_type   | String      | 사용자 타입 (참여자 or 주최자) |

> 회원가입 `양식 제출` 버튼 클릭 시, 로그인 페이지로 이동
>
> 회원가입 `취소` 버튼 클릭 시, 로그인 페이지로 이동
>
> 회원가입 항목 누락 시, 경고 메시지 출력



## 회원 관리

| ACTION        | METHOD | URL             | DESCRIPTION                                         | 기능   |
| ------------- | ------ | --------------- | --------------------------------------------------- | ------ |
| signup_accept | POST   | /signup_acc.xxx | 회원 가입한 참여자를 주최자가 가입 허용 여부를 결정 | UPDATE |

+ 변수

  | 변수명    | 데이터 형식 | 설명                           |
  | --------- | ----------- | ------------------------------ |
  | user_type | String      | 사용자 타입 (참여자 or 주최자) |
  |           |             |                                |
  |           |             |                                |

> user_type은 주최자의 경우 L을 갖고, 최초 가입한 참여자의 경우 null을 갖는다.
>
> 만약 최초 가입한 참여자가 주최자의 가입 승인을 받게 되면 user_type은 P로 변경된다.



## 로그인

| ACTION | METHOD | URL        | DESCRIPTION     | 기능   |
| ------ | ------ | ---------- | --------------- | ------ |
| login  | POST   | /login.xxx | 사용자의 로그인 | SELECT |

+ 변수

  | 변수명    | 데이터 형식 | 설명                           |
  | --------- | ----------- | ------------------------------ |
  | user_id   | String      | 사용자 아이디                  |
  | user_pw   | String      | 사용자 비밀번호                |
  | user_name | String      | 사용자 이름                    |
  | user_type | String      | 사용자 타입 (참여자 or 주최자) |

> `Login` 버튼 클릭 시 , 메인 페이지로 이동
>
> 사용자 아이디와 비밀번호 불일치 시, 경고 메시지 출력
>
> 주최자 타입으로 로그인하는 경우, 회원 관리 탭 추가
>
> 참여자 타입으로 로그인하는 경우, 주최자의 가입 승인 없이 로그인 불가



## 로그아웃

| ACTION | METHOD | URL         | DESCRIPTION       | 기능 |
| ------ | ------ | ----------- | ----------------- | ---- |
| logout | POST   | /logout.xxx | 사용자의 로그아웃 | -    |

+ 변수

  | 변수명 | 데이터 형식 | 설명 |
  | ------ | ----------- | ---- |
  |        |             |      |
  |        |             |      |
  |        |             |      |

> 로그인 내용 세션 종료
>
> ```java
> HttpSession session=req.getSession(false);
> 			session.invalidate();
> 			return "";
> ```



## ID 찾기

| ACTION  | METHOD | URL          | DESCRIPTION      | 기능   |
| ------- | ------ | ------------ | ---------------- | ------ |
| id_find | POST   | /id.find.xxx | 사용자의 ID 찾기 | SELECT |

+ 변수

  | 변수명     | 데이터 형식 | 설명            |
  | ---------- | ----------- | --------------- |
  | user_id    | String      | 사용자 아이디   |
  | user_pw    | String      | 사용자 비밀번호 |
  | user_name  | String      | 사용자 이름     |
  | user_phone | int         | 사용자 전화번호 |

> user_name, user_phone 입력 시, 이에 해당하는 ID 출력
>
> 입력 정보가 DB에 없을 시, 경고 메시지 출력
>
> 로그인 페이지로 이동 버튼 클릭 시, 로그인 페이지로 이동
>
> PW 찾기 버튼 클릭 시, PW 찾기 페이지로 이동



## PW 찾기

| ACTION  | METHOD | URL          | DESCRIPTION      | 기능   |
| ------- | ------ | ------------ | ---------------- | ------ |
| pw_find | POST   | /pw.find.xxx | 사용자의 PW 찾기 | SELECT |

+ 변수

  | 변수명    | 데이터 형식 | 설명            |
  | --------- | ----------- | --------------- |
  | user_id   | String      | 사용자 아이디   |
  | user_pw   | String      | 사용자 비밀번호 |
  | user_name | String      | 사용자 이름     |

> user_name, user_id, user_phone 입력 시, 이에 해당하는 PW 출력
>
> 입력 정보가 DB에 없을 시, 경고 메시지 출력
>
> 로그인 페이지로 이동 클릭 시, 로그인 페이지로 이동



## 인사말

| ACTION | METHOD | URL        | DESCRIPTION | 기능 |
| ------ | ------ | ---------- | ----------- | ---- |
| intro  | GET    | /intro.xxx | 버미 인사말 | -    |

+ 변수

  | 변수명     | 데이터 형식 | 설명      |
  | ---------- | ----------- | --------- |
  | intro_text | String      | 버미 소개 |
  |            |             |           |
  |            |             |           |

> 참고사항



## 공지사항_공지 조회

| ACTION | METHOD | URL         | DESCRIPTION            | 기능   |
| ------ | ------ | ----------- | ---------------------- | ------ |
| notice | GET    | /notice.xxx | 사용자의 공지사항 조회 | SELECT |

+ 변수

  | 변수명         | 데이터 형식 | 설명                 |
  | -------------- | ----------- | -------------------- |
  | notice_title   | String      | 공지사항 조회        |
  | notice_date    | date        | 공지사항 날짜 작성일 |
  | notice_content | String      | 공지사항 내용        |

> `notice` 버튼 클릭 시, 사용자가 주최자가 작성한 공지사항을 확인
>
> 각 공지사항에는 작성된 일자가 기입



## 공지사항_공지 작성

| ACTION       | METHOD | URL               | DESCRIPTION            | 기능   |
| ------------ | ------ | ----------------- | ---------------------- | ------ |
| notice_write | POST   | /notice_write.xxx | 주최자의 공지사항 작성 | INSERT |

+ 변수

  | 변수명       | 데이터 형식 | 설명              |
  | ------------ | ----------- | ----------------- |
  | notice_title | string      | 공지사항 제목     |
  | notice_pw    | int         | 공지사항 비밀번호 |
  | notice_date  | date        | 공지사항 작성일   |

> 주최자는 공지사항을 작성할 권한이 부여
>
> 공지사항 작성 후에는 비밀번호를 기입하여 작성자 접근 권한을 제한
>
> 공지사항에는 작성일이 표시



## 공지사항_공지 수정

| ACTION         | METHOD | URL                 | DESCRIPTION   | 기능   |
| -------------- | ------ | ------------------- | ------------- | ------ |
| notice_rewrite | POST   | /notice_rewrite.xxx | 공지사항 수정 | INSERT |

+ 변수

  | 변수명       | 데이터 형식 | 설명              |
  | ------------ | ----------- | ----------------- |
  | notice_title | string      | 공지사항 제목     |
  | notice_pw    | int         | 공지사항 비밀번호 |
  | notice_date  | date        | 공지사항 작성일   |

> 주최자가 본인이 작성한 공지사항을 비밀번호로 인증하여 수정 가능



## 공지사항_공지 삭제

| ACTION        | METHOD | URL                | DESCRIPTION   | 기능 |
| ------------- | ------ | ------------------ | ------------- | ---- |
| notice_delete |        | /notice_delete.xxx | 공지사항 삭제 |      |

+ 변수

  | 변수명 | 데이터 형식 | 설명 |
  | ------ | ----------- | ---- |
  |        |             |      |
  |        |             |      |
  |        |             |      |

> 주최자가 본인이 작성한 공지사항을 비밀번호로 인증하여 삭제 가능



## 일반 게시판_ 게시물 조회

| ACTION | METHOD | URL        | DESCRIPTION          | 기능   |
| ------ | ------ | ---------- | -------------------- | ------ |
| board  | GET    | /board.xxx | 사용자의 게시물 조회 | SELECT |

+ 요청변수

  | 변수명      | 데이터 형식 | 설명            | 필수여부 |
  | ----------- | ----------- | --------------- | -------- |
  | boardm_seq  | integer     | 게시판 구분번호 | N        |
  | board_seq   | integer     | 게시물 연번     | N        |
  | board_title | String      | 게시물 제목     | Y        |
  | cdate       | date        | 게시물 등록일자 | Y        |
  | author_nm   | string      | 게시자 이름     | Y        |

+ 응답변수

  | 변수명      | 데이터 형식 | 설명            | 필수여부 |
  | ----------- | ----------- | --------------- | -------- |
  | board_exp   | String      | 게시물 내용     | Y        |
  | board_seq   | integer     | 게시물 연번     | N        |
  | board_title | string      | 게시물 제목     | Y        |
  | tel         | string      | 게시자 전화번호 | N        |
  | author_id   | int         | 게시자 아이디   | N        |
  | cdate       | date        | 게시물 등록일자 | Y        |
  | author_nm   | string      | 게시자 이름     | Y        |

+ 샘플페이지

```
[
		{
			"boardm_seq" : "1",  
			"board_seq" : "210415001",
 			"board_tetle" : "오늘 수업 내용 정리해봤습니다",
			"cdate" : "2021-04-15", 
			"author_nm" : "김지은"
		}
]
```

```
[
		{
			"board_exp" : "오늘 수업에서는 일찍 자고 일찍 일어나야 하는 이유에 대해 배웠습니다.
                     일찍 자고 일찍 일어나면 건강에 좋다는 것은 오래전부터 알려져있습니다.
                     이것은 멜라토닌 호르몬 때문입니다.
                     멜라토닌은 수면시 송과선에서 생성 분리되는 호르몬입니다.
                     면역력, 향산화, 생체 리듬 조절 등 건강을 위해서 멜라토닌 호르몬은 필수입니다.",
			"board_seq" : "210415001",
			"board_title" : "오늘 수업 내용 정리해봤습니다.",
			"tel" : "010-1234-1234",
			"author_id" : "id1234", 
			"cdate" : "2021-04-15", 
			"author_nm" : "김지은"
		}
	]
```





## 일반 게시판_ 게시물 작성

| ACTION     | METHOD | URL              | DESCRIPTION          | 기능   |
| ---------- | ------ | ---------------- | -------------------- | ------ |
| board_post | POST   | /board_write.xxx | 작성자의 게시물 작성 | INSERT |

+ 요청변수

  | 변수명      | 데이터 형식 | 설명                                                         | 필수여부 |
  | ----------- | ----------- | ------------------------------------------------------------ | -------- |
  | board_exp   | String      | 게시글 내용<br />\- html태그 사용 가능 (예: 줄바꿈은 `<br/>` 사용) <br/>- 아래 태그는 사용 불가<br/>\- `<iframe>` 태그나 `<embed>` 태그는 신뢰할 수 있는 사이트에만 허용된다.<br/>\- `<script>` 태그는 사용할 수 없다.<br/>\- URL 인코딩하여 요청함<br/>- 해당 string은 UTF-8로 encode 후 MS949로 재 encode를 수행한 값 | Y        |
  | board_seq   | integer     | 게시물 연번                                                  | N        |
  | board_title | string      | 게시글 제목<br/>- URL 인코딩하여 요청함<br/>\- 해당 string은 UTF-8로 encode 후 MS949로 재 encode를 수행한 값 | Y        |
  | board_image | file        | 이미지 첨부 파일(복수의 이미지 등록 가능)<br/>\- image 파라미터를 사용할 때는 데이터를 multipart 형식으로 전송해야 한다.<br/>\- 이미지 파일을 2개 이상 첨부할 때는 파라미터를 중복해서 사용한다. | N        |
  | tel         | string      | 게시자 전화번호                                              | N        |
  | author_id   | int         | 게시자 아이디                                                | N        |
  | cdate       | date        | 게시물 등록일자                                              | Y        |
  | author_nm   | string      | 게시자 이름                                                  | Y        |

* 출력 결과

  | 필드      | 타입   | 설명                                           |
  | --------- | ------ | ---------------------------------------------- |
  | status    | int    | 200: 게시글 글쓰기 성공, 500: 게시글 쓰기 실패 |
  | articleId | String | 작성된 게시글의 링크주소                       |

* 샘플페이지

```
[
		{
			"board_exp" : "오늘 수업에서는 일찍 자고 일찍 일어나야 하는 이유에 대해 배웠습니다.
                     일찍 자고 일찍 일어나면 건강에 좋다는 것은 오래전부터 알려져있습니다.
                     이것은 멜라토닌 호르몬 때문입니다.
                     멜라토닌은 수면시 송과선에서 생성 분리되는 호르몬입니다.
                     면역력, 향산화, 생체 리듬 조절 등 건강을 위해서 멜라토닌 호르몬은 필수입니다.",
			"board_seq" : "210415001",
			"board_title" : "오늘 수업 내용 정리해봤습니다.",
			"tel" : "010-1234-1234",
			"author_id" : "id1234", 
			"cdate" : "2021-04-15", 
			"author_nm" : "김지은"
		}
	]
```





## 일반 게시판_ 게시물 수정

| ACTION    | METHOD | URL                | DESCRIPTION          | 기능   |
| --------- | ------ | ------------------ | -------------------- | ------ |
| board_put | PUT    | /board_rewrite.xxx | 작성자의 게시물 수정 | INSERT |

+ 요청변수

  | 변수명      | 데이터 형식 | 설명            | 필수여부 |
  | ----------- | ----------- | --------------- | -------- |
  | boardm_seq  | integer     | 게시판 구분번호 | N        |
  | board_seq   | integer     | 게시물 연번     | N        |
  | board_title | String      | 게시물 제목     | Y        |
  | cdate       | date        | 게시물 등록일자 | Y        |
  | author_nm   | string      | 게시자 이름     | Y        |
  | author_id   | string      | 게시자 아이디   | Y        |

+ 출력변수

  | 변수명      | 데이터 형식 | 설명                                                         | 필수여부 |
  | ----------- | ----------- | ------------------------------------------------------------ | -------- |
  | board_exp   | String      | 게시글 내용<br/>\- html태그 사용 가능 (예: 줄바꿈은 `<br/>` 사용) <br/>- 아래 태그는 사용 불가<br/>\- `<iframe>` 태그나 `<embed>` 태그는 신뢰할 수 있는 사이트에만 허용된다.<br/>\- `<script>` 태그는 사용할 수 없다.<br/>\- URL 인코딩하여 요청함<br/>\- 해당 string은 UTF-8로 encode 후 MS949로 재 encode를 수행한 값 | Y        |
  | board_seq   | integer     | 게시물 연번                                                  | N        |
  | board_title | string      | 게시글 제목<br/>\- URL 인코딩하여 요청함<br/>\- 해당 string은 UTF-8로 encode 후 MS949로 재 encode를 수행한 값 | Y        |
  | board_image | file        | 이미지 첨부 파일(복수의 이미지 등록 가능)<br/>\- image 파라미터를 사용할 때는 데이터를 multipart 형식으로 전송해야 한다.<br/>\- 이미지 파일을 2개 이상 첨부할 때는 파라미터를 중복해서 사용한다. | N        |
  | tel         | string      | 게시자 전화번호                                              | N        |
  | author_id   | int         | 게시자 아이디                                                | N        |
  | cdate       | date        | 게시물 등록일자                                              | Y        |
  | author_nm   | string      | 게시자 이름                                                  | Y        |

> 게시물 게시자만 수정 권한 허용



## 일반 게시판_ 게시물 삭제

| ACTION        | METHOD | URL                | DESCRIPTION          | 기능 |
| ------------- | ------ | ------------------ | -------------------- | ---- |
| notice_delete | DELETE | /notice_delete.xxx | 작성자의 게시물 삭제 |      |

+ 요청변수

  | 변수명      | 데이터 형식 | 설명            | 필수여부 |
  | ----------- | ----------- | --------------- | -------- |
  | author_id   | string      | 게시자 아이디   | Y        |
  | author_pw   | string      | 게시자 비밀번호 | Y        |
  | board_seq   | integer     | 게시물 연번     | Y        |
  | board_title | String      | 게시물 제목     | Y        |

* 출력 결과

  | 필드   | 타입 | 설명                                         |
  | ------ | ---- | -------------------------------------------- |
  | status | int  | 200: 게시글 삭제 성공, 500: 게시글 삭제 실패 |

> 게시물 게시자만 삭제 권한 허용





## 얼굴 등록

| ACTION        | METHOD | URL                | DESCRIPTION      | 기능   |
| ------------- | ------ | ------------------ | ---------------- | ------ |
| face_register | POST   | /face.register.xxx | 사용자 얼굴 등록 | INSERT |

+ 변수

  | 변수명       | 데이터 형식  | 설명                                                    |
  | ------------ | ------------ | ------------------------------------------------------- |
  | face_info    | object       | CFR을 이용해 받는 얼굴 이미지 크기와 개수의 값          |
  | face_faces[] | object array | CFR을 이용해 감지된 얼굴의 개별 분석 결과를 가지는 배열 |
  | face_id      | String       | id와 매칭시킬 face_id 값                                |

> 네이버 AI API CFR을 이용하여 faces 배열에 얼굴 이미지 분석에 대한 다양한 정보를 받고 이를 등록하기위해 실제아이디와 매칭시키는 id값을 가진다.



## 상태 확인

| ACTION          | METHOD | URL                  | DESCRIPTION             | 기능   |
| --------------- | ------ | -------------------- | ----------------------- | ------ |
| condition_check | POST   | /condition.check.xxx | 사용자의 현재 상태 분석 | INSERT |

+ 변수

  | 변수명                     | 데이터 형식  | 설명                                      |
  | -------------------------- | ------------ | ----------------------------------------- |
  | condition_faces[].landmark | place object | 감지된 얼굴의 눈 코 입 위치를 가지는 객체 |
  | condition_now              | String       | 얼굴의 값을 분석해서 추정한 현재 상태     |
  |                            |              |                                           |

> 얼굴의 분석 결과값을 가지고 현재 상태를 추정하기위한 알고리즘을 만들어야한다.



## 타이머 설정

| ACTION    | METHOD | URL        | DESCRIPTION | 기능 |
| --------- | ------ | ---------- | ----------- | ---- |
| timer_set | GET    | /timer.xxx | 타이머      | -    |

+ 변수

| 변수명        | 데이터 형식 | 설명             |
| ------------- | ----------- | ---------------- |
| timer_hours   | int         | 타이머 설정 시간 |
| timer_minutes | int         | 타이머 설정 분   |
| timer_seconds | int         | 타이머 설정 초   |

> 타이머 시간 설정 화면 (시간, 분, 초)
>
> 타이머 시작 버튼, 타이머 리셋 버튼, 타이머 일시정지 버튼 활용



## 타이머 실행

| ACTION      | METHOD | URL  | DESCRIPTION                           | 기능 |
| ----------- | ------ | ---- | ------------------------------------- | ---- |
| timer_start | GET    | -    | 타이머 시작 시 설정된 시간이 줄어듬   | -    |
| timer_reset | GET    | -    | 타이머 리셋 시 초기화                 | -    |
| timer_stop  | GET    | -    | 타이머 정지 시 시간이 줄어들다가 멈춤 | -    |

+ 변수

  | 변수명 | 데이터 형식 | 설명 |
  | ------ | ----------- | ---- |
  |        |             |      |
  |        |             |      |
  |        |             |      |

>참고사항